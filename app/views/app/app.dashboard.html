<div class="page page-dashboard" ng-show="vm.user">
  <br>
  <div class="col-xs-12">
    <div id="sub-header" role="heading">
      <p>I won't be Impressed with tecnology until I can donwload <strong class="food-collor">FOOD.</strong></p>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <div layout layout-sm="column"
           class="col-xs-offset-1 col-md-offset-4 col-xs-10 col-md-5 text-center"
           role="search">
        <md-input-container flex>
          <label class="pla-ho-collor">What are you looking for?</label>
          <input ng-model="vm.search" tabindex="0">
        </md-input-container>
      </div>
    </div>

    <div id="card-content" class="col-xs-12 col-lg-8">
      <div class="card col-xs-12 col-lg-4"
           ng-repeat="restaurant in vm.restaurants | filter:vm.search"
           tabindex="0"
           aria-label="Restaurant {{ restaurant.name }} from {{ restaurant.country }}"
           ng-focus="restaurant.isSelected = true"
           ng-blur="restaurant.isSelected = false"
           ng-keypress="vm.select(restaurant, $event)"
           ng-click="vm.select(restaurant)"
           role="listitem">
        <div class="content" ng-class="{'selected-card': restaurant.isSelected}">
          <img class="img-responsive center"
               ng-src="../images/{{restaurant.image}}"
               alt="{{restaurant.alt}}"
               title="{{restaurant.alt}}"/>
        </div>
        <div class="card-footer">
          <ul>
            <li class="lead">{{ restaurant.name }}</li>
            <li class="strap">{{ restaurant.country }}</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="col-xs-12 col-lg-4 card-detail">
      <div class="content" ng-show="vm.selected">
        <!-- pictures -->
        <div ng-show="vm.selected.pictures">
          <div class="rating-stars text-center">
            <i ng-mouseenter="enter($index + 1)"
               ng-click="rate($index + 1)"
               class="glyphicon ng-scope fa fa-star text-orange text-lg"
               ng-class="$index < value &amp;&amp; (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')"
               ng-attr-title="{{r.title}}"
               role="button"
               tabindex="-1"
               title="one">
            </i>
            <i ng-mouseenter="enter($index + 1)"
               ng-click="rate($index + 1)"
               class="glyphicon ng-scope fa fa-star text-orange text-lg"
               ng-class="$index < value &amp;&amp; (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')"
               ng-attr-title="{{r.title}}"
               role="button"
               tabindex="-1"
               title="one">
            </i>
            <i ng-mouseenter="enter($index + 1)"
               ng-click="rate($index + 1)"
               class="glyphicon ng-scope fa fa-star text-orange text-lg"
               ng-class="$index < value &amp;&amp; (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')"
               ng-attr-title="{{r.title}}"
               role="button"
               tabindex="-1"
               title="one">
            </i>
            <i ng-mouseenter="enter($index + 1)"
               ng-click="rate($index + 1)"
               class="glyphicon ng-scope fa fa-star text-orange text-lg"
               ng-class="$index < value &amp;&amp; (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')"
               ng-attr-title="{{r.title}}"
               role="button"
               tabindex="-1"
               title="one">
            </i>
            <i ng-mouseenter="enter($index + 1)"
               ng-click="rate($index + 1)"
               class="glyphicon ng-scope fa fa-star text-orange text-lg"
               ng-class="$index < value &amp;&amp; (r.stateOn || 'glyphicon-star') || (r.stateOff || 'glyphicon-star-empty')"
               ng-attr-title="{{r.title}}"
               role="button"
               tabindex="-1"
               title="one">
            </i>
          </div>

          <img class="img-responsive text-center"
               ng-src="../images/{{vm.selected.background}}"
               alt="{{vm.selected.alt}}"
               title="{{vm.selected.alt}}"/>
        </div>
        <!-- /pictures -->

        <!-- details -->
        <div ng-show="vm.selected.detail" class="card-back-div">
          <div class="tile-widget">
            <div class="row">
              <div class="col-xs-12 detail-first" aria-label="{{vm.selected.name}} Details chef {{vm.selected.chef}}" tabindex="0">
                <div class="media mb-20">
                  <div class="pull-left thumb">
                    <img class="media-object img-circle"
                         ng-src="../images/{{vm.selected.image}}"
                         alt="{{restaurant.alt}}"
                         title="{{restaurant.alt}}"/>
                  </div>
                  <div class="media-body">
                    <h4 class="media-heading mb-0">{{ vm.selected.name }} </h4>
                    <small>Chef: <strong class="chef-label">{{ vm.selected.chef }}</strong></small>
                  </div>
                </div>
              </div>

              <div class="col-xs-12">
                <dl class="dl-horizontal text-sm">
                  <dt>Rating: </dt>
                  <dd class="text-lightred start-color" tabindex="0" aria-label="Rate {{vm.selected.rate | limitTo : 3}}">
                    <i class="fa fa-star" ng-repeat="stars in vm.selected.stars"></i>
                    <i class="fa fa-star-half-o" ng-repeat="halfStar in vm.selected.halfStar"></i>
                    ({{vm.selected.rate | limitTo : 3}})
                  </dd>
                  <dt>Cuisine: </dt>
                  <dd tabindex="0" aria-label="cuisine {{vm.selected.cuisine}}">{{ vm.selected.cuisine }}</dd>
                  <dt>Operating Hours: </dt>
                  <div tabindex="0" aria-label="operating hours Weekday {{vm.selected.weekday}}, Weekend {{vm.selected.weekend}}">
                    <table ng-table="tableParams" class="table table-custom">
                      <tr><td><span>Weekday: {{ vm.selected.weekday }}</span></td></tr>
                      <tr><td><span>Weekend: {{ vm.selected.weekend }}</span></td></tr>
                    </table>
                  </div>
                </dl>
              </div>
            </div>
          </div>
        </div>
        <!-- /details -->

        <!-- review -->
        <div ng-show="vm.selected.review" class="card-back-div">

          <div class="tile-body review-content" style="max-height: 315px;overflow:auto;" slimscroll="{height: '100%'}">
            <ul class="chats p-0" tabindex="0">
              <li ng-class="{'in': $index % 2 == 0 , 'out': $index % 2 != 0}" ng-repeat="review in vm.listReviews" ng-show="review.restaurant_id == vm.selected.id" ng-attr-id="{{ 'review-' + vm.selected.id }}" tabindex="0" aria-label="at {{review.date}}, {{review.userName}} said {{review.review}}">

                <div class="media">
                  <div ng-class="{'pull-left': $index % 2 == 0 , 'pull-right': $index % 2 != 0}" class="thumb thumb-sm">
                    <img class="media-object img-circle" ng-src="{{review.userPhoto}}" alt="User Photo">
                  </div>
                  <div class="media-body">
                    <p class="media-heading"><a href="javascript:;" class="name user-name" tabindex="-1">{{ review.userName }}</a><strong> at {{ review.date }}</strong></p>
                    <span class="body">{{ review.review }}</span>
                  </div>
                </div>
              </li>
            </ul>

          </div>
        </div>
        <!-- /review -->

        <!-- write review -->
        <div ng-show="vm.selected.writeReview" class="card-back-div">

          <div class="form-group">
            <label >How was your experience at <strong class="chef-label">{{vm.selected.name}}</strong></label>
            <textarea class="form-control write-first"
                      rows="5"
                      ng-model="vm.selected.reviews.message"
                      maxlength="100"
                      aria-label="How was your experience at {{vm.selected.name}}"
                      tabindex="0">
            </textarea>
          </div>

          <div class="text-center">
            <div ng-init="x = 0" class="mb-10">
              <rating ng-model="vm.selected.reviews.rate" max="5" state-on="'fa fa-star text-orange text-lg'" state-off="'fa fa-star-o text-lg'" tabindex="0" aria-label="How many stars for {{vm.selected.name}}" aria-required="true"></rating>
              <b>({{vm.selected.reviews.rate}})</b>
            </div>
            <button class="btn btn-cyan btn-ef"
                    ng-click="vm.publishReview(vm.selected)"
                    ng-disabled="!vm.selected.reviews.rate"
                    tabindex="0"> Publish
            </button>
          </div>

        </div>
        <!-- /write review -->

        <!-- footer -->
        <div class="row text-center pull-down col-xs-12 footer">
          <hr class="personalized">
          <div class="col-xs-4">
            <a id="first"
               href="javascript:;"
               class="no-collor"
               ng-class="{'selected-item': vm.selected.detail}"
               ng-click="vm.details(vm.selected)"
               tabindex="0"
               style="text-decoration: none;"
               aria-label="Details"
               role="listitem">
              <i class="fa fa-asterisk fa-2x" aria-hidden="true"></i> Details
            </a>
          </div>
          <div class="col-xs-4">
            <a href="javascript:;"
               class="no-collor"
               ng-class="{'selected-item': vm.selected.review}"
               ng-click="vm.reviews(vm.selected)"
               tabindex="0"
               style="text-decoration: none;"
               aria-label="Reviews"
               role="listitem">
              <i class="fa fa-bars fa-2x" aria-hidden="true"></i> Reviews
            </a>
          </div>
          <div class="col-xs-4">
            <a id="last"
               href="javascript:;"
               class="no-collor"
               ng-class="{'selected-item': vm.selected.writeReview}"
               ng-click="vm.writeReview(vm.selected)"
               tabindex="0"
               style="text-decoration: none;"
               aria-label="Write a review"
               role="listitem">
              <i class="fa fa-pencil-square-o fa-2x" aria-hidden="true"></i> Write review
            </a>
          </div>
        </div>
        <!-- /footer -->
      </div>
    </div>

  </div>
